<!DOCTYPE html> 
<html lang="ar" dir="rtl"> 
<head> 
    <meta charset="UTF-8"> 
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
    <title>Whizz.ink - Gemini Pro ŸÖÿπ ÿØÿπŸÖ ÿßŸÑÿµŸàÿ± üèÜ</title> 
    <link rel="preconnect" href="https://fonts.googleapis.com"> 
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin> 
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap" rel="stylesheet"> 
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"> 
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css"> 
    <style> 
        /* ========================================================================== 
           WHIZZ.INK - ÿßŸÑŸÜÿ≥ÿÆÿ© ÿßŸÑŸÖÿ≠ÿØÿ´ÿ© ŸÖÿπ Dark Mode Ÿàÿ±ÿ®ÿ∑ ŸÖÿ®ÿßÿ¥ÿ± ÿ®ŸÄ Gemini API Ÿàÿ™ÿ≠ÿØŸäÿØ ÿ≠ÿ¨ŸÖ ÿßŸÑÿ≥ÿ¨ŸÑ Ÿàÿ≤ÿ± ÿßŸÑÿ•ŸäŸÇÿßŸÅ ŸàÿØÿπŸÖ ÿßŸÑÿµŸàÿ± Ÿàÿ™ÿµŸÅŸäÿ© ÿßŸÑÿ≥ÿ¨ŸÑ 
           Updated: 2025-12-16 | Developer: aladan (Whizz.ink) 
           ========================================================================== */ 
 
        :root { 
            /* Light Theme (Default) */ 
            --primary-bg: #F9FAFB; 
            --secondary-bg: #FFFFFF; 
            --border-color: #E5E7EB; 
            --text-color: #374151; 
            --text-secondary: #6B7280; 
            --brand-color: #4F46E5; 
            --user-bubble-bg: #EEF2FF; 
            --ai-bubble-bg: #F3F4F6; 
            --code-bg: #1F2937; 
            --code-text: #E5E7EB; 
            --shadow: 0 1px 3px rgba(0,0,0,0.1); 
        } 
 
        [data-theme="dark"] { 
            /* Dark Theme */ 
            --primary-bg: #0F172A; 
            --secondary-bg: #1E293B; 
            --border-color: #334155; 
            --text-color: #F1F5F9; 
            --text-secondary: #94A3B8; 
            --brand-color: #6366F1; 
            --user-bubble-bg: #475569; 
            --ai-bubble-bg: #334155; 
            --code-bg: #0F172A; 
            --code-text: #F1F5F9; 
            --shadow: 0 1px 3px rgba(0,0,0,0.3); 
        } 
 
        /* Basic Reset & Base */ 
        * { margin: 0; padding: 0; box-sizing: border-box; } 
        html { scroll-behavior: smooth; } 
        body { 
            font-family: 'Cairo', sans-serif; 
            background: var(--primary-bg); 
            color: var(--text-color); 
            min-height: 100vh; 
            display: flex; 
            flex-direction: column; 
            direction: rtl; 
            transition: background-color 0.3s ease, color 0.3s ease; 
        } 
 
        /* --- Header --- */ 
        .header { 
            background: var(--secondary-bg); 
            border-bottom: 1px solid var(--border-color); 
            padding: 16px 24px; 
            display: flex; 
            align-items: center; 
            justify-content: space-between; 
            box-shadow: var(--shadow); 
            position: sticky; 
            top: 0; 
            z-index: 100; 
        } 
        .app-name { 
            font-size: 20px; 
            font-weight: 700; 
            color: var(--brand-color); 
            display: flex; 
            align-items: center; 
            gap: 8px; 
        } 
        .header-icons { 
            display: flex; 
            gap: 8px; 
        } 
        .header-icon { 
            color: var(--text-color); 
            font-size: 18px; 
            cursor: pointer; 
            padding: 8px; 
            border-radius: 8px; 
            transition: all 0.2s ease; 
        } 
        .header-icon:hover { 
            background: var(--ai-bubble-bg); 
            color: var(--brand-color); 
        } 
 
        /* --- Theme Toggle --- */ 
        .theme-toggle { 
            position: relative; 
            width: 40px; 
            height: 40px; 
            background: var(--border-color); 
            border-radius: 50%; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            cursor: pointer; 
            transition: all 0.3s ease; 
        } 
        .theme-toggle:hover { 
            background: var(--brand-color); 
            color: white; 
        } 
        .theme-toggle i { 
            font-size: 16px; 
            transition: transform 0.3s ease; 
        } 
        [data-theme="dark"] .theme-toggle i { 
            transform: rotate(180deg); 
        } 
 
        /* --- Chat Container --- */ 
        .chat-container { 
            flex-grow: 1; 
            overflow-y: auto; 
            padding: 24px; 
            display: flex; 
            flex-direction: column; 
            align-items: center; 
            gap: 20px; 
            scrollbar-width: thin; 
            scrollbar-color: var(--text-secondary) transparent; 
        } 
        .chat-container::-webkit-scrollbar { 
            width: 6px; 
        } 
        .chat-container::-webkit-scrollbar-track { 
            background: transparent; 
        } 
        .chat-container::-webkit-scrollbar-thumb { 
            background: var(--text-secondary); 
            border-radius: 3px; 
        } 
 
        /* --- Welcome Container --- */ 
        .welcome-container { 
            max-width: 500px; 
            text-align: center; 
            background: var(--secondary-bg); 
            border: 1px solid var(--border-color); 
            border-radius: 16px; 
            padding: 48px 32px; 
            box-shadow: 0 8px 32px rgba(0,0,0,0.1); 
            transition: all 0.3s ease; 
        } 
        .welcome-logo { 
            font-size: 72px; 
            margin-bottom: 20px; 
            animation: bounce 2s infinite; 
        } 
        .welcome-title { 
            font-size: 28px; 
            font-weight: 700; 
            color: var(--brand-color); 
            margin-bottom: 12px; 
        } 
        .welcome-subtitle { 
            font-size: 16px; 
            color: var(--text-secondary); 
            line-height: 1.6; 
            margin-bottom: 32px; 
        } 
        .welcome-btn { 
            padding: 12px 28px; 
            font-size: 16px; 
            font-weight: 600; 
            background: var(--brand-color); 
            color: white; 
            border: none; 
            border-radius: 25px; 
            cursor: pointer; 
            transition: all 0.3s ease; 
            box-shadow: 0 4px 12px rgba(79, 70, 229, 0.3); 
        } 
        .welcome-btn:hover { 
            background: #3B30C4; 
            transform: translateY(-2px); 
            box-shadow: 0 6px 20px rgba(79, 70, 229, 0.4); 
        } 
 
        /* --- Messages (RTL Fixed) --- */ 
        .message { 
            display: flex; 
            align-items: flex-start; 
            gap: 16px; 
            width: 100%; 
            max-width: 900px; 
            animation: slideIn 0.3s ease-out; 
        } 
        @keyframes slideIn { 
            from { opacity: 0; transform: translateY(20px); } 
            to { opacity: 1; transform: translateY(0); } 
        } 
        .message.user-message { 
            justify-content: flex-end; 
        } 
        .message.ai-message { 
            justify-content: flex-start; 
        } 
        .message-bubble { 
            max-width: 75%; 
            padding: 16px 20px; 
            border-radius: 20px; 
            line-height: 1.7; 
            font-size: 16px; 
            box-shadow: var(--shadow); 
            position: relative; 
            word-wrap: break-word; 
            overflow-wrap: break-word; 
        } 
        .user-message .message-bubble { 
            background: var(--user-bubble-bg); 
            border-bottom-left-radius: 4px; 
        } 
        .ai-message .message-bubble { 
            background: var(--ai-bubble-bg); 
            border-bottom-right-radius: 4px; 
        } 
        .message-time { 
            font-size: 12px; 
            color: var(--text-secondary); 
            margin-top: 8px; 
            opacity: 0.8; 
        } 
        .message-actions { 
            display: flex; 
            gap: 6px; 
            opacity: 0; 
            transition: opacity 0.2s ease; 
            margin-top: 8px; 
        } 
        .message:hover .message-actions { 
            opacity: 1; 
        } 
        .message-action-btn { 
            background: none; 
            border: none; 
            color: var(--text-secondary); 
            font-size: 14px; 
            cursor: pointer; 
            padding: 6px; 
            border-radius: 6px; 
            transition: all 0.2s ease; 
        } 
        .message-action-btn:hover { 
            color: var(--brand-color); 
            background: rgba(79, 70, 229, 0.1); 
        } 
 
        /* --- Code Blocks (Enhanced) --- */ 
        .ai-message pre { 
            background: var(--code-bg) !important; 
            color: var(--code-text) !important; 
            border-radius: 12px; 
            padding: 16px !important; 
            margin: 12px 0 !important; 
            overflow-x: auto; 
            direction: ltr; 
            font-size: 14px; 
            line-height: 1.6; 
            border: 1px solid rgba(255,255,255,0.1); 
        } 
        .code-block-wrapper { 
            margin: 12px 0; 
            border-radius: 12px; 
            overflow: hidden; 
        } 
        .code-toolbar { 
            background: rgba(0,0,0,0.3); 
            color: var(--code-text); 
            padding: 10px 16px; 
            display: flex; 
            justify-content: space-between; 
            align-items: center; 
            font-size: 14px; 
            font-family: 'Cairo', sans-serif; 
        } 
        .code-language { 
            font-weight: 600; 
        } 
        .code-actions .code-action-btn { 
            color: var(--code-text); 
            font-size: 14px; 
            padding: 8px; 
            border-radius: 6px; 
        } 
        .code-actions .code-action-btn:hover { 
            background: rgba(255,255,255,0.2); 
        } 
 
        /* --- Input Area --- */ 
        .input-container { 
            background: var(--secondary-bg); 
            border-top: 1px solid var(--border-color); 
            padding: 20px 24px; 
            display: flex; 
            align-items: flex-end; 
            gap: 12px; 
            box-shadow: var(--shadow); 
        } 
        .message-input { 
            flex-grow: 1; 
            padding: 14px 20px; 
            border: 2px solid var(--border-color); 
            border-radius: 25px; 
            font-family: inherit; 
            font-size: 16px; 
            color: var(--text-color); 
            background: var(--secondary-bg); 
            resize: none; 
            max-height: 120px; 
            outline: none; 
            transition: all 0.3s ease; 
            direction: rtl; 
        } 
        .message-input:focus { 
            border-color: var(--brand-color); 
            box-shadow: 0 0 0 4px rgba(79, 70, 229, 0.1); 
        } 
        .message-input::placeholder { 
            color: var(--text-secondary); 
        } 
        .send-btn { 
            background: var(--brand-color); 
            color: white; 
            border: none; 
            width: 48px; 
            height: 48px; 
            border-radius: 50%; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            font-size: 18px; 
            cursor: pointer; 
            transition: all 0.3s ease; 
            flex-shrink: 0; 
        } 
        .send-btn:hover:not(:disabled) { 
            background: #3B30C4; 
            transform: scale(1.05); 
        } 
        .send-btn:disabled { 
            background: var(--text-secondary); 
            cursor: not-allowed; 
            transform: none; 
        } 
        .send-btn.loading { 
            animation: pulse 1.5s infinite; 
        } 
        @keyframes pulse { 
            0%, 100% { opacity: 1; } 
            50% { opacity: 0.5; } 
        } 
 
        /* --- Typing Indicator (Enhanced) --- */ 
        .typing-indicator { 
            display: flex; 
            align-items: center; 
            gap: 12px; 
            padding: 14px 20px; 
            background: var(--ai-bubble-bg); 
            border-radius: 20px; 
            max-width: fit-content; 
            color: var(--text-color); 
            font-size: 15px; 
            box-shadow: var(--shadow); 
            animation: slideIn 0.3s ease-out; 
        } 
        .typing-avatar { 
            width: 32px; 
            height: 32px; 
            background: var(--brand-color); 
            border-radius: 50%; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            color: white; 
            font-size: 14px; 
            flex-shrink: 0; 
        } 
        .typing-dots { 
            display: flex; 
            gap: 6px; 
        } 
        .typing-dot { 
            width: 10px; 
            height: 10px; 
            background: var(--text-secondary); 
            border-radius: 50%; 
            animation: typingBounce 1.4s infinite ease-in-out; 
        } 
        .typing-dot:nth-child(2) { animation-delay: 0.2s; } 
        .typing-dot:nth-child(3) { animation-delay: 0.4s; } 
        @keyframes typingBounce { 
            0%, 80%, 100% { transform: scale(0.8) translateY(0); } 
            40% { transform: scale(1.2) translateY(-5px); } 
        } 
 
        /* --- Notifications --- */ 
        .notification { 
            position: fixed; 
            top: 24px; 
            left: 50%; 
            transform: translateX(-50%); 
            background: var(--brand-color); 
            color: white; 
            padding: 12px 24px; 
            border-radius: 10px; 
            font-size: 15px; 
            opacity: 0; 
            visibility: hidden; 
            transition: all 0.3s ease; 
            z-index: 1000; 
            box-shadow: 0 8px 24px rgba(0,0,0,0.2); 
        } 
        .notification.show { 
            opacity: 1; 
            visibility: visible; 
            transform: translateX(-50%) translateY(0); 
        } 
        .notification.error { background: #EF4444; } 
        .notification.success { background: #10B981; } 
 
        /* --- Responsive Design --- */ 
        @media (max-width: 768px) { 
            .header { padding: 16px 20px; } 
            .chat-container { padding: 16px; gap: 16px; } 
            .welcome-container {  
                margin: 0 16px; 
                padding: 32px 24px; 
            } 
            .welcome-logo { font-size: 56px; } 
            .welcome-title { font-size: 24px; } 
            .message-bubble {  
                max-width: 90%; 
                padding: 14px 18px; 
                font-size: 15px; 
            } 
            .input-container {  
                padding: 16px 20px; 
                margin: 0 16px; 
                border-radius: 20px; 
                margin-top: 16px; 
                box-shadow: 0 -4px 20px rgba(0,0,0,0.1); 
            } 
            .send-btn { width: 44px; height: 44px; } 
        } 
 
        /* Bounce Animation for Logo */ 
        @keyframes bounce { 
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); } 
            40% { transform: translateY(-10px); } 
            60% { transform: translateY(-5px); } 
        } 
 
        /* üÜï CSS for Image Preview */ 
        .image-preview-container { 
            position: relative; 
            display: flex; 
            align-items: center; 
            justify-content: flex-start; /* For RTL */ 
            background: var(--secondary-bg); 
            border: 1px solid var(--border-color); 
            border-radius: 12px; 
            padding: 8px; 
            margin-top: 10px; /* Space above input */ 
            margin-inline-end: auto; /* Push to right in RTL */ 
            max-width: 900px; 
            width: 100%; 
            box-shadow: var(--shadow); 
            flex-shrink: 0; /* Prevent shrinking */ 
        } 
        .image-preview-container img { 
            max-height: 100px;  
            max-width: 100%;  
            border-radius: 8px;  
            margin: 8px;  
            border: 1px solid var(--border-color); 
            object-fit: contain; /* Ensure image fits without cropping */ 
        } 
        .image-preview-container .header-icon { /* Reusing header-icon style for consistency */ 
            position: absolute;  
            top: 5px;  
            left: 5px; /* For RTL */ 
            background: rgba(239, 68, 68, 0.8);  
            color: white;  
            border-radius: 50%;  
            width: 28px;  
            height: 28px;  
            font-size: 14px;  
            padding: 0; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            cursor: pointer; 
            z-index: 10; 
        } 
        .image-preview-container .header-icon:hover { 
            background: rgba(239, 68, 68, 1); 
            transform: scale(1.1); 
        } 
    </style> 
</head> 
<body> 
    <div class="header"> 
        <div class="app-name"> 
            <i class="fas fa-bolt"></i> 
            Whizz.ink 
        </div> 
        <div class="header-icons"> 
            <div class="header-icon theme-toggle" id="themeToggle" title="ÿ™ÿ®ÿØŸäŸÑ ÿßŸÑŸàÿ∂ÿπ ÿßŸÑŸÑŸäŸÑŸä/ÿßŸÑŸÜŸáÿßÿ±Ÿä"> 
                <i class="fas fa-moon"></i> 
            </div> 
            <div class="header-icon" id="clearChat" title="ŸÖÿ≥ÿ≠ ÿßŸÑŸÖÿ≠ÿßÿØÿ´ÿ©"> 
                <i class="fas fa-trash"></i> 
            </div> 
        </div> 
    </div> 
 
    <div class="chat-container" id="chatContainer"> 
        <div class="welcome-container" id="welcomeMessage"> 
            <div class="welcome-logo">‚ö°</div> 
            <div class="welcome-title">ŸÖÿ±ÿ≠ÿ®ÿßŸã ÿ®ŸÉ ŸÅŸä Whizz.ink ÿßŸÑŸÖÿ≠ÿØÿ´</div> 
            <div class="welcome-subtitle"> 
                Ÿàÿßÿ¨Ÿáÿ© ÿØÿ±ÿØÿ¥ÿ© ŸÖÿ™ŸÇÿØŸÖÿ© ŸÖÿπ **Dark Mode**ÿå **ŸÖÿ≠ÿßÿ∞ÿßÿ© RTL ŸÖÿ´ÿßŸÑŸäÿ©**ÿå Ÿà**ÿ±ÿ®ÿ∑ ŸÖÿ®ÿßÿ¥ÿ± ÿ®ŸÄ Gemini API**.<br> 
                ÿßŸÑÿ¢ŸÜ ŸÖÿπ **ÿØÿπŸÖ ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑÿµŸàÿ±!** üñºÔ∏è 
                <small style="opacity: 0.8;">ŸÖÿØÿπŸàŸÖ ŸÖŸÜ Sapiens AI | ÿßŸÑŸÜÿ≥ÿÆÿ© ÿßŸÑŸÖÿ≠ÿØÿ´ÿ© 2025 ‚ú®</small> 
            </div> 
            <div style="display: flex; gap: 12px; flex-wrap: wrap; justify-content: center;"> 
                <button class="welcome-btn" onclick="whizz.sendPredefinedMessage('ÿßÿ¥ÿ±ÿ≠ ŸÑŸä ŸÖÿ®ÿØÿ£ ÿπŸÖŸÑ ÿßŸÑŸÄ Mocking ŸÅŸä ÿßŸÑŸÄ Frontend ŸÖÿπ ŸÖÿ´ÿßŸÑ ŸÉŸàÿØ JavaScript.')"> 
                    ŸÉŸäŸÅ ŸäÿπŸÖŸÑ ÿßŸÑŸÄ Mockingÿü 
                </button> 
                <button class="welcome-btn" onclick="whizz.sendPredefinedMessage('ÿßÿπÿ∑ŸÜŸä ŸÖÿ´ÿßŸÑ ŸÉÿßŸÖŸÑ ŸÑŸÄ Todo App ÿ®ŸÄ React + Tailwind CSS.')" style="background: #10B981;"> 
                    ŸÖÿ´ÿßŸÑ React App 
                </button> 
            </div> 
        </div> 
    </div> 
 
    <div class="image-preview-container" id="imagePreviewContainer" style="display: none;"> 
        <img id="imagePreview" src="" alt="ÿµŸàÿ±ÿ© ŸÖÿ±ŸÅŸÇÿ©"> 
        <button class="header-icon" id="removeImageBtn" title="ÿ•ÿ≤ÿßŸÑÿ© ÿßŸÑÿµŸàÿ±ÿ©"> 
            <i class="fas fa-times"></i> 
        </button> 
    </div> 
 
    <div class="input-container"> 
        <button class="header-icon" id="uploadImageBtn" title="ÿ•ÿ±ŸÅÿßŸÇ ÿµŸàÿ±ÿ©"> 
            <i class="fas fa-image"></i> 
        </button> 
        <input type="file" id="imageInput" accept="image/*" style="display: none;"> 
 
        <textarea  
            class="message-input"  
            id="messageInput"  
            placeholder="ÿßŸÉÿ™ÿ® ÿ±ÿ≥ÿßŸÑÿ™ŸÉ ŸáŸÜÿß... (ÿßÿ∂ÿ∫ÿ∑ Enter ŸÑŸÑÿ•ÿ±ÿ≥ÿßŸÑÿå Shift+Enter ŸÑÿ≥ÿ∑ÿ± ÿ¨ÿØŸäÿØ) üöÄ" 
            rows="1"  
            maxlength="5000" 
        ></textarea> 
        <button class="send-btn" id="sendBtn" title="ÿ•ÿ±ÿ≥ÿßŸÑ (Enter)" disabled> 
            <i class="fas fa-paper-plane" id="sendIcon"></i>  
            <i class="fas fa-stop" id="stopIcon" style="display: none;"></i> 
        </button> 
    </div> 
 
    <div class="notification" id="notification"></div> 
 
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script> 
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/javascript.min.js"></script> 
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/python.min.js"></script> 
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/json.min.js"></script> 
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/xml.min.js"></script> 
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/css.min.js"></script> 
    <script> 
        // ========================================================================== 
        // WHIZZ.INK - ÿßŸÑŸÜÿ≥ÿÆÿ© ÿßŸÑŸÖÿ≠ÿØÿ´ÿ© ŸÖÿπ Dark Mode Ÿàÿ±ÿ®ÿ∑ ŸÖÿ®ÿßÿ¥ÿ± ÿ®ŸÄ Gemini API ŸàÿØÿπŸÖ ÿßŸÑÿµŸàÿ± 
        // Updated: 2025-12-16 | Developer: aladan (Whizz.ink) 
        // ‚ö†Ô∏è ÿ™ŸÖ ÿ™ŸÜÿ∏ŸäŸÅ ÿßŸÑÿ£ÿÆÿ∑ÿßÿ° ÿßŸÑÿ≠ÿ±ÿ¨ÿ© (settingsBtn Ÿàÿ™ŸÉÿ±ÿßÿ± ÿßŸÑÿØŸàÿßŸÑ) 
        // üõ†Ô∏è ÿ™ŸÖ ÿ•ÿ∂ÿßŸÅÿ© ŸÜÿµ ÿßŸÅÿ™ÿ±ÿßÿ∂Ÿä ŸÑŸÑÿµŸàÿ± ÿßŸÑŸÖÿ±ÿ≥ŸÑÿ© ÿ®ÿØŸàŸÜ ŸÜÿµ
        // üõ°Ô∏è ÿ™ŸÖ ÿ™ÿ£ŸÖŸäŸÜ ÿßŸÑŸÖŸÅÿ™ÿßÿ≠ ÿπÿ®ÿ± ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ Cloudflare Worker ŸÉŸÄ Proxy
        // ========================================================================== 
 
        // üö®üö®üö® ŸÖŸÑÿßÿ≠ÿ∏ÿ© ŸáÿßŸÖÿ©: ÿ™ŸÖ ÿ≠ÿ∞ŸÅ GEMINI_API_KEY ŸÜŸáÿßÿ¶ŸäÿßŸã ŸÖŸÜ Ÿáÿ∞ÿß ÿßŸÑŸÖŸÑŸÅ!
        // üöÄ Ÿäÿ¨ÿ® ÿ£ŸÜ ÿ™ŸÇŸàŸÖ ÿ®ÿ™ÿ≠ÿØŸäÿ´ Ÿáÿ∞ÿß ÿßŸÑÿ±ÿßÿ®ÿ∑ ÿ•ŸÑŸâ ÿ±ÿßÿ®ÿ∑ Cloudflare Worker ÿßŸÑÿÆÿßÿµ ÿ®ŸÉ 
        const GEMINI_API_URL = "https://gemini-proxy-adil.adillaghrifi5.workers.dev"; // ‚¨ÖÔ∏è ÿ±ÿßÿ®ÿ∑ Proxy ÿßŸÑÿÆÿßÿµ ÿ®ŸÉ
         
        const MAX_HISTORY_MESSAGES = 10;  
 
        function generateUUID() { 
            return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) { 
                var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8); 
                return v.toString(16); 
            }); 
        } 
 
        class WhizzAI { 
            constructor() { 
                this.initElements(); 
                this.state = { 
                    isTyping: false, 
                    chatHistory: [],  
                    theme: localStorage.getItem('whizz-theme') || 'light', 
                    isCancelled: false, 
                    currentImageBase64: null  
                }; 
                this.loadState(); 
                this.initTheme(); 
                this.initEventListeners(); 
                this.renderInitialChatHistory(); // üßπ ÿßŸÑÿØÿßŸÑÿ© ÿ∫Ÿäÿ± ŸÖŸÉÿ±ÿ±ÿ© ÿßŸÑÿ¢ŸÜ
            } 
 
            initElements() { 
                this.elements = { 
                    chatContainer: document.getElementById('chatContainer'), 
                    messageInput: document.getElementById('messageInput'), 
                    sendBtn: document.getElementById('sendBtn'), 
                    welcomeMessage: document.getElementById('welcomeMessage'), 
                    notification: document.getElementById('notification'), 
                    clearChat: document.getElementById('clearChat'), 
                    // ‚ùå ÿ™ŸÖ ÿ≠ÿ∞ŸÅ settingsBtn: document.getElementById('settingsBtn'), 
                    themeToggle: document.getElementById('themeToggle'), 
                    stopIcon: document.getElementById('stopIcon'), 
                    sendIcon: document.getElementById('sendIcon'), 
                    uploadImageBtn: document.getElementById('uploadImageBtn'),  
                    imageInput: document.getElementById('imageInput'),  
                    imagePreviewContainer: document.getElementById('imagePreviewContainer'),  
                    imagePreview: document.getElementById('imagePreview'),  
                    removeImageBtn: document.getElementById('removeImageBtn'), 
                }; 
            } 
 
            initTheme() { 
                document.documentElement.setAttribute('data-theme', this.state.theme); 
            } 
 
            toggleTheme() { 
                this.state.theme = this.state.theme === 'light' ? 'dark' : 'light'; 
                document.documentElement.setAttribute('data-theme', this.state.theme); 
                localStorage.setItem('whizz-theme', this.state.theme); 
                this.showNotification( 
                    this.state.theme === 'dark' ?  
                    'ÿ™ŸÖ ÿ™ŸÅÿπŸäŸÑ ÿßŸÑŸàÿ∂ÿπ ÿßŸÑŸÑŸäŸÑŸä üåô' :  
                    'ÿ™ŸÖ ÿ™ŸÅÿπŸäŸÑ ÿßŸÑŸàÿ∂ÿπ ÿßŸÑŸÜŸáÿßÿ±Ÿä ‚òÄÔ∏è',  
                    'success' 
                ); 
            } 
 
            initEventListeners() { 
                
                // Auto-resize textarea 
                this.elements.messageInput.addEventListener('input', (e) => { 
                    e.target.style.height = 'auto'; 
                    e.target.style.height = Math.min(e.target.scrollHeight, 120) + 'px'; 
                    this.elements.sendBtn.disabled = (e.target.value.trim().length === 0 && !this.state.currentImageBase64);  
                }); 
 
                // Theme toggle 
                this.elements.themeToggle.addEventListener('click', () => this.toggleTheme()); 
 
                // Clear chat 
                this.elements.clearChat.addEventListener('click', () => this.clearConversation()); 
 
                // Initial state 
                this.elements.sendBtn.disabled = true; 
 
                // Send/Stop button logic
                this.elements.sendBtn.addEventListener('click', () => { 
                    if (this.state.isTyping) { 
                        this.cancelGeneration(); 
                    } else { 
                        this.sendMessage(); 
                    } 
                }); 
 
                this.elements.messageInput.addEventListener('keypress', (e) => { 
                    if (e.key === 'Enter' && !e.shiftKey) { 
                        e.preventDefault(); 
                        if (this.state.isTyping) { 
                             this.cancelGeneration(); 
                        } else { 
                            this.sendMessage(); 
                        } 
                    } 
                }); 
 
                // Image upload handlers 
                this.elements.uploadImageBtn.addEventListener('click', () => { 
                    this.elements.imageInput.click(); 
                }); 
 
                this.elements.imageInput.addEventListener('change', (e) => this.handleImageUpload(e.target.files[0])); 
                this.elements.removeImageBtn.addEventListener('click', () => this.removeImage()); 
            } 
 
            handleImageUpload(file) { 
                if (!file) return; 
 
                if (!file.type.startsWith('image/')) { 
                    this.showNotification('ÿßŸÑÿ±ÿ¨ÿßÿ° ÿßÿÆÿ™Ÿäÿßÿ± ŸÖŸÑŸÅ ÿµŸàÿ±ÿ© ÿµÿßŸÑÿ≠.', 'error'); 
                    return; 
                } 
 
                const reader = new FileReader(); 
                reader.onloadend = () => { 
                    this.state.currentImageBase64 = reader.result.split(',')[1]; 
                    this.state.currentImageMimeType = file.type; 
                    
                    this.elements.imagePreview.src = reader.result; 
                    this.elements.imagePreviewContainer.style.display = 'flex'; 
                    this.elements.messageInput.focus(); 
                    this.elements.sendBtn.disabled = false; 
                }; 
                reader.readAsDataURL(file); 
                this.showNotification(`ÿ™ŸÖ ÿ•ÿ±ŸÅÿßŸÇ ÿßŸÑÿµŸàÿ±ÿ©: ${file.name}`, 'info'); 
            } 
 
            removeImage() { 
                this.state.currentImageBase64 = null; 
                this.state.currentImageMimeType = null; 
                this.elements.imageInput.value = '';  
                this.elements.imagePreview.src = ''; 
                this.elements.imagePreviewContainer.style.display = 'none'; 
                
                this.elements.sendBtn.disabled = this.elements.messageInput.value.trim().length === 0; 
                this.showNotification('ÿ™ŸÖ ÿ•ÿ≤ÿßŸÑÿ© ÿßŸÑÿµŸàÿ±ÿ©.', 'info'); 
            } 
 
 
            toggleSendButton(isTyping) { 
                this.state.isTyping = isTyping; 
                if (isTyping) { 
                    this.elements.sendIcon.style.display = 'none'; 
                    this.elements.stopIcon.style.display = 'inline'; 
                    this.elements.sendBtn.classList.add('loading'); 
                } else { 
                    this.elements.sendIcon.style.display = 'inline'; 
                    this.elements.stopIcon.style.display = 'none'; 
                    this.elements.sendBtn.classList.remove('loading'); 
                } 
            } 
 
            cancelGeneration() { 
                if (this.state.isTyping) { 
                    this.state.isCancelled = true; 
                    this.showNotification('ÿ™ŸÖ ÿ•ŸäŸÇÿßŸÅ ÿßŸÑÿ±ÿØ ÿ®ŸÜÿ¨ÿßÿ≠.', 'info'); 
                    this.hideTypingIndicator(); 
                    this.toggleSendButton(false); 
                    this.elements.sendBtn.disabled = false; 
                    this.elements.messageInput.focus(); 
                } 
            } 
 
            async sendMessage() { 
                const text = this.elements.messageInput.value.trim(); 
                if (!text && !this.state.currentImageBase64 || this.elements.sendBtn.disabled) return; 
 
                const messageUUID = generateUUID(); 
                 
                // üõ†Ô∏è ÿ®ŸÜÿßÿ° ÿßŸÑŸÖÿ≠ÿ™ŸàŸâ ÿßŸÑÿ≠ÿßŸÑŸä (ÿßŸÑŸÜÿµ Ÿà/ÿ£Ÿà ÿßŸÑÿµŸàÿ±ÿ©) 
                const currentParts = []; 
                if (this.state.currentImageBase64) { 
                    currentParts.push({ 
                        inlineData: { 
                            data: this.state.currentImageBase64, 
                            mimeType: this.state.currentImageMimeType || 'image/jpeg' 
                        } 
                    }); 
                } 
                
                // üõ†Ô∏è ÿ•ÿ∂ÿßŸÅÿ© ÿßŸÑŸÜÿµ (ÿ•ÿ∞ÿß ŸÉÿßŸÜ ŸÖŸàÿ¨ŸàÿØÿßŸã)ÿå ÿ£Ÿà ÿ•ÿ∂ÿßŸÅÿ© ŸÜÿµ ÿßŸÅÿ™ÿ±ÿßÿ∂Ÿä ŸÑŸÑÿµŸàÿ±ÿ© ÿ•ÿ∞ÿß ŸÉÿßŸÜ ÿßŸÑŸÜÿµ ŸÅÿßÿ±ÿ∫ÿßŸã
                if (text) { 
                    currentParts.push({ text: text }); 
                } else if (this.state.currentImageBase64) {
                    currentParts.push({ text: "ŸÖÿßÿ∞ÿß ŸäŸàÿ¨ÿØ ŸÅŸä Ÿáÿ∞Ÿá ÿßŸÑÿµŸàÿ±ÿ©ÿü" }); 
                }
 
                // 1. ÿ£ÿ∂ŸÅ ÿ±ÿ≥ÿßŸÑÿ© ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ ÿ•ŸÑŸâ ÿßŸÑÿ≥ÿ¨ŸÑ ÿßŸÑÿ¢ŸÜ 
                const userMessage = {  
                    role: 'user',  
                    parts: currentParts,  
                    uuid: messageUUID,  
                    timestamp: Date.now()  
                };  
                this.state.chatHistory.push(userMessage);  
 
                // 2. ÿπÿ±ÿ∂ ÿßŸÑÿ±ÿ≥ÿßŸÑÿ© ŸÅŸä DOM 
                this.addMessageToDOM(currentParts, 'user', messageUUID);  
                this.removeImage();  
 
                this.elements.welcomeMessage.style.display = 'none'; 
                this.elements.messageInput.value = ''; 
                this.elements.messageInput.style.height = 'auto'; 
                this.elements.sendBtn.disabled = false;  
                this.toggleSendButton(true); 
 
 
                this.showTypingIndicator(); 
 
                try {  
                    // 3. ÿ™ÿ¨ŸÖŸäÿπ ÿ≥ÿ¨ŸÑ ÿßŸÑŸÖÿ≠ÿßÿØÿ´ÿßÿ™ (ŸÖÿπ ÿ™ÿ≠ÿØŸäÿØ ÿßŸÑÿ≠ÿØ ÿßŸÑÿ£ŸÇÿµŸâ Ÿàÿ™ŸÜÿ∏ŸäŸÅ ÿßŸÑÿµŸàÿ± ÿßŸÑŸÇÿØŸäŸÖÿ©) 
                    const recentHistory = this.state.chatHistory.slice(-MAX_HISTORY_MESSAGES); 
 
                    const contentsToSend = recentHistory.map((msg, index) => { 
                        const isLastMessage = index === recentHistory.length - 1; 
 
                        let cleanParts = msg.parts; 
 
                        // ŸÑÿß ÿ™ÿ±ÿ≥ŸÑ ÿßŸÑÿµŸàÿ± ÿßŸÑŸÇÿØŸäŸÖÿ©! 
                        if (!isLastMessage) { 
                            cleanParts = msg.parts.filter(part => part.text); 
                             
                            if (cleanParts.length === 0) { 
                                cleanParts.push({ text: "" }); 
                            } 
                        } 
 
                        return { 
                            role: msg.role === 'user' ? 'user' : 'model',  
                            parts: cleanParts  
                        }; 
                    }); 
                     
                    const aiMessageUUID = generateUUID(); 
                    const messageDiv = this.createMessageStructure('ai', '...');  
                    messageDiv.dataset.messageUuid = aiMessageUUID; 
                    this.elements.chatContainer.appendChild(messageDiv); 
                    this.scrollToBottom(); 
 
                    const bubbleContent = messageDiv.querySelector('.message-bubble > div:first-child'); 
                      
                    // üõ°Ô∏è ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ ÿ±ÿßÿ®ÿ∑ ÿßŸÑŸÄ PROXY ÿßŸÑÿ¢ŸÜ
                    const response = await fetch(GEMINI_API_URL, {  
                        method: 'POST', 
                        headers: {  
                            'Content-Type': 'application/json'  
                        },  
                        body: JSON.stringify({  
                            contents: contentsToSend,  
                            generationConfig: {  
                                temperature: 0.7,  
                                topK: 40,  
                                topP: 0.95,  
                                maxOutputTokens: 2048  
                            }  
                        })  
                    }); 
 
                    const data = await response.json(); 
                      
                    if (response.ok && data.candidates?.[0]?.content?.parts?.[0]?.text) {  
                        const fullResponse = data.candidates[0].content.parts[0].text;  
                         
                        // 4. ÿ£ÿ∂ŸÅ ÿßŸÑÿ±ÿØ ÿ•ŸÑŸâ ÿßŸÑÿ≥ÿ¨ŸÑ 
                        const enrichedMessage = {   
                            role: 'ai',   
                            parts: [{ text: fullResponse }],   
                            uuid: aiMessageUUID,   
                            timestamp: Date.now()   
                        };   
                        this.state.chatHistory.push(enrichedMessage);   
                        this.saveState();   
 
                        // 5. ÿπÿ±ÿ∂ ÿßŸÑŸÉÿ™ÿßÿ®ÿ© ÿßŸÑÿ™ÿØÿ±Ÿäÿ¨Ÿäÿ© 
                        const words = fullResponse.split(' ');  
                        let currentText = '';  
                        for (let i = 0; i < words.length; i++) {  
                            if (this.state.isCancelled) {  
                                this.state.isCancelled = false; 
                                break;  
                            } 
                            currentText += (i > 0 ? ' ' : '') + words[i];  
                            bubbleContent.innerHTML = this.parseMarkdown(currentText);  
                            this.highlightCodeBlocks(messageDiv);  
                            this.scrollToBottom();  
                            await this.delay(15 + Math.random() * 10);  
                        } 
 
                    } else {  
                        // ŸÖÿπÿßŸÑÿ¨ÿ© ÿ£ÿÆÿ∑ÿßÿ° ÿßŸÑŸÄ Proxy ÿ£Ÿà ÿßŸÑŸÄ API
                        const errorMessage = data.error?.message || 'ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£ ÿ∫Ÿäÿ± ŸÖÿπÿ±ŸàŸÅ. ÿ™ÿ£ŸÉÿØ ŸÖŸÜ ÿ£ŸÜ ÿßŸÑŸÄ Worker ŸäÿπŸÖŸÑ ÿ®ÿ¥ŸÉŸÑ ÿµÿ≠Ÿäÿ≠ ÿ£Ÿà ÿ£ŸÜ ŸÖŸÅÿ™ÿßÿ≠ API ÿ≥ŸÑŸäŸÖ.';  
                        bubbleContent.innerHTML = this.parseMarkdown(`‚ùå ÿÆÿ∑ÿ£ ŸÅŸä ÿßŸÑÿßÿ™ÿµÿßŸÑ: ${errorMessage}`);  
                        this.showNotification(`ÿÆÿ∑ÿ£ ŸÅŸä API: ${errorMessage}`, 'error'); 
 
                        this.state.chatHistory.pop(); 
                        this.saveState(); 
                    }  
                      
                } catch (error) {  
                    console.error("Connection Error:", error);  
                    const lastMessage = this.elements.chatContainer.lastElementChild.querySelector('.message-bubble > div:first-child');  
                    lastMessage.innerHTML = this.parseMarkdown('ÿπÿ∞ÿ±ÿßŸãÿå ŸÅÿ¥ŸÑ ÿßŸÑÿßÿ™ÿµÿßŸÑ ÿ®ÿÆÿØŸÖÿ© ÿßŸÑŸÄ Proxy ÿ£Ÿà Gemini. ÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ÿ±ÿßÿ®ÿ∑ `GEMINI_API_URL`.');  
                    this.showNotification('‚ùå ŸÅÿ¥ŸÑ ÿßŸÑÿßÿ™ÿµÿßŸÑ. ÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ÿ±ÿßÿ®ÿ∑ ÿßŸÑŸÄ Proxy.', 'error'); 
                     
                    this.state.chatHistory.pop(); 
                    this.saveState(); 
 
                } finally {  
                    this.toggleSendButton(false);  
                    this.hideTypingIndicator();  
                    this.elements.sendBtn.disabled = this.elements.messageInput.value.trim().length === 0; 
                    this.elements.messageInput.focus();  
                } 
            } 
 
            addMessageToDOM(parts, sender, messageUUID) {  
                let htmlContent = '';  
                let text = ''; 
                 
                parts.forEach(part => { 
                    if (part.text) { 
                        text += part.text; 
                    } else if (part.inlineData) { 
                        const imageUrl = `data:${part.inlineData.mimeType};base64,${part.inlineData.data}`; 
                        htmlContent += `<img src="${imageUrl}" alt="ÿµŸàÿ±ÿ© ŸÖÿ±ŸÅŸÇÿ©" style="max-width:100%; height:auto; border-radius:12px; margin-bottom: 12px;">`; 
                    } 
                }); 
 
                htmlContent += this.parseMarkdown(text); 
 
                const messageDiv = this.createMessageStructure(sender, htmlContent);  
                messageDiv.dataset.messageUuid = messageUUID;  
                this.elements.chatContainer.appendChild(messageDiv);  
                this.scrollToBottom();  
            } 
 
            parseMarkdown(text) { 
                return text 
                    // Code blocks 
                    .replace(/```(\w+)?\n?([\s\S]*?)```/g, (match, lang = 'text', code) => { 
                        const languageDisplay = lang === 'text' ? 'ŸÉŸàÿØ' : lang.toUpperCase(); 
                        const sanitizedCode = code.trim().replace(/"/g, '&quot;'); 
                        return ` 
                            <div class="code-block-wrapper"> 
                                <div class="code-toolbar"> 
                                    <span class="code-language">${languageDisplay}</span> 
                                    <div class="code-actions"> 
                                        <button class="code-action-btn" onclick="whizz.copyCode(event)" data-code="${sanitizedCode}" title="ŸÜÿ≥ÿÆ ÿßŸÑŸÉŸàÿØ"> 
                                            <i class="fas fa-copy"></i> 
                                        </button> 
                                    </div> 
                                </div> 
                                <pre><code class="language-${lang}">${code.trim()}</code></pre> 
                            </div>`; 
                    }) 
                    // Bold & Italic 
                    .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>') 
                    .replace(/\*(.*?)\*/g, '<em>$1</em>') 
                    // Blockquotes 
                    .replace(/^>\s?(.*)$/gm, '<blockquote style="background: rgba(79,70,229,0.1); border-inline-start: 4px solid var(--brand-color); padding: 12px 16px; margin: 12px 0; border-radius: 8px;">$1</blockquote>') 
                    // Headers 
                    .replace(/^### (.*)$/gm, '<h4 style="color: var(--brand-color); font-size: 18px; margin: 16px 0 8px 0; font-weight: 700;">$1</h4>') 
                    .replace(/^## (.*)$/gm, '<h3 style="color: var(--brand-color); font-size: 20px; margin: 20px 0 12px 0; font-weight: 700; border-bottom: 2px solid rgba(79,70,229,0.2); padding-bottom: 8px;">$1</h3>') 
                    // Lists 
                    .replace(/^- (.*)$/gm, '<div style="margin: 8px 0; display: flex; align-items: center;"><i class="fas fa-check-circle" style="color: #10B981; margin-left: 8px;"></i><span>$1</span></div>') 
                    // Line breaks 
                    .replace(/\n/g, '<br>'); 
            } 
 
            highlightCodeBlocks(container) {
                container.querySelectorAll('pre code').forEach((block) => {
                    hljs.highlightElement(block);
                });
            }

            copyCode(event) { 
                event.stopPropagation(); 
                const button = event.currentTarget; 
                const code = button.dataset.code.replace(/&quot;/g, '"'); 
                navigator.clipboard.writeText(code).then(() => { 
                    const original = button.innerHTML; 
                    button.innerHTML = '<i class="fas fa-check"></i>'; 
                    button.style.background = 'rgba(16,185,129,0.2)'; 
                    this.showNotification('‚úÖ ÿ™ŸÖ ŸÜÿ≥ÿÆ ÿßŸÑŸÉŸàÿØ ÿ®ŸÜÿ¨ÿßÿ≠!', 'success'); 
                    setTimeout(() => { 
                        button.innerHTML = original; 
                        button.style.background = ''; 
                    }, 2000); 
                }).catch(() => { 
                    this.showNotification('‚ùå ŸÅÿ¥ŸÑ ŸÅŸä ÿßŸÑŸÜÿ≥ÿÆ!', 'error'); 
                }); 
            } 
 
            copyMessage(event) { 
                event.stopPropagation(); 
                const messageDiv = event.currentTarget.closest('.message'); 
                const text = messageDiv.querySelector('.message-bubble').textContent; 
                navigator.clipboard.writeText(text).then(() => { 
                    this.showNotification('üìã ÿ™ŸÖ ŸÜÿ≥ÿÆ ÿßŸÑÿ±ÿ≥ÿßŸÑÿ©!', 'success'); 
                }); 
            } 
 
            sendPredefinedMessage(text) { 
                this.elements.messageInput.value = text; 
                this.elements.sendBtn.disabled = false;  
                this.sendMessage(); 
            } 
 
            createMessageStructure(sender, content) { 
                const messageDiv = document.createElement('div'); 
                messageDiv.className = `message ${sender}-message`; 
                messageDiv.dataset.messageUuid = generateUUID(); 
 
                const time = new Date().toLocaleTimeString('ar-EG', {  
                    hour: '2-digit',  
                    minute: '2-digit',  
                    hour12: false  
                }); 
 
                const finalContent = typeof content === 'string' ? this.parseMarkdown(content) : content; 
 
                messageDiv.innerHTML = ` 
                    <div class="message-bubble"> 
                        <div>${finalContent}</div> 
                        <div class="message-time">${time}</div> 
                    </div> 
                    <div class="message-actions"> 
                        <button class="message-action-btn" onclick="whizz.copyMessage(event)" title="ŸÜÿ≥ÿÆ ÿßŸÑÿ±ÿ≥ÿßŸÑÿ©"> 
                            <i class="fas fa-copy"></i> 
                        </button> 
                    </div> 
                `; 
 
                return messageDiv; 
            } 
 
            showTypingIndicator() { 
                const typingDiv = document.createElement('div'); 
                typingDiv.className = 'typing-indicator'; 
                typingDiv.innerHTML = ` 
                    <div class="typing-avatar">ü§ñ</div> 
                    <span>Whizz.ink ŸäŸÉÿ™ÿ®...</span> 
                    <div class="typing-dots"> 
                        <div class="typing-dot"></div> 
                        <div class="typing-dot"></div> 
                        <div class="typing-dot"></div> 
                    </div> 
                `; 
                typingDiv.id = 'typingIndicator'; 
                this.elements.chatContainer.appendChild(typingDiv); 
                this.scrollToBottom(); 
            } 
 
            hideTypingIndicator() { 
                const indicator = document.getElementById('typingIndicator'); 
                if (indicator) { 
                    indicator.remove(); 
                } 
            } 
 
            saveState() { 
                localStorage.setItem('whizzInkChatHistory', JSON.stringify(this.state.chatHistory)); 
                localStorage.setItem('whizz-theme', this.state.theme); 
            } 
 
            loadState() { 
                const savedHistory = localStorage.getItem('whizzInkChatHistory'); 
                if (savedHistory) { 
                    this.state.chatHistory = JSON.parse(savedHistory); 
                } 
            } 
 
            // üßπ ÿßŸÑÿØÿßŸÑÿ© ÿßŸÑÿµÿ≠Ÿäÿ≠ÿ© ÿßŸÑŸàÿ≠ŸäÿØÿ© ÿßŸÑŸÖÿ™ÿ®ŸÇŸäÿ©
            renderInitialChatHistory() {  
                if (this.state.chatHistory.length > 0) {  
                    this.elements.welcomeMessage.style.display = 'none';  
                    this.state.chatHistory.forEach(msg => {  
                        this.addMessageToDOM(msg.parts, msg.role, msg.uuid); 
                        hljs.highlightAll();  
                    });  
                    this.scrollToBottom();  
                }  
            } 
 
            clearConversation() { 
                if (confirm('üóëÔ∏è ŸáŸÑ ÿ™ÿ±ŸäÿØ ŸÖÿ≥ÿ≠ ÿ¨ŸÖŸäÿπ ÿßŸÑŸÖÿ≠ÿßÿØÿ´ÿßÿ™ÿü (ŸÑÿß ŸäŸÖŸÉŸÜ ÿßŸÑÿ™ÿ±ÿßÿ¨ÿπ)')) { 
                    this.elements.chatContainer.innerHTML = ''; 
                    this.elements.chatContainer.appendChild(this.elements.welcomeMessage); 
                    this.elements.welcomeMessage.style.display = 'block'; 
                    this.state.chatHistory = []; 
                    localStorage.removeItem('whizzInkChatHistory'); 
                    this.showNotification('‚úÖ ÿ™ŸÖ ŸÖÿ≥ÿ≠ ÿßŸÑŸÖÿ≠ÿßÿØÿ´ÿ© ÿ®ŸÜÿ¨ÿßÿ≠!', 'success'); 
                    this.elements.sendBtn.disabled = true; 
                    this.elements.messageInput.value = ''; 
                } 
            } 
 
            scrollToBottom() { 
                this.elements.chatContainer.scrollTo({ 
                    top: this.elements.chatContainer.scrollHeight, 
                    behavior: 'smooth' 
                }); 
            } 
 
            delay(ms) { 
                return new Promise(resolve => setTimeout(resolve, ms)); 
            } 
 
            showNotification(text, type = 'info') { 
                this.elements.notification.textContent = text; 
                this.elements.notification.className = `notification ${type} show`; 
                setTimeout(() => { 
                    this.elements.notification.classList.remove('show'); 
                }, 4000); 
            } 
        } 
 
        // Initialize App 
        const whizz = new WhizzAI(); 
        window.whizz = whizz; 
 
        document.addEventListener('DOMContentLoaded', () => { 
            hljs.highlightAll(); 
            whizz.elements.messageInput.focus(); 
        }); 
    </script> 
</body> 
</html>
